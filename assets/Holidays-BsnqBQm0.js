import{j as t,r as h,u as D,S as H,A as B,_ as C}from"./index-Dp3GpNt-.js";import{f as M,g as f,a as T,c as F,b as g,d as k,e as E,h as $,u as O,s as v,C as z,i as G}from"./generateICS-CFN0rtit.js";function A(s){return s.flatMap(o=>o.holidays.map(l=>({...l,kind:"publicHoliday",country:o.countryName,countryCode:o.countryCode})))}const P="_eventsList_mrwyz_1",I="_eventsWrapper_mrwyz_6",R="_dateEvents_mrwyz_23",W="_eventsDate_mrwyz_27",V="_events_mrwyz_1",x={eventsList:P,eventsWrapper:I,dateEvents:R,eventsDate:W,events:V};function K({selectedYearDays:s,currentDate:o,mode:l,countryData:d}){return t.jsx("div",{className:x.eventsList,children:t.jsx("div",{className:x.eventsWrapper,children:s.filter(a=>l==="month"?a.date.getMonth()===o.getMonth():!0).filter(a=>a.events.length).map(a=>t.jsxs("div",{className:x.dateEvents,children:[t.jsx("div",{className:x.eventsDate,children:t.jsx("b",{children:M(a.date)})}),a.events.map(n=>n.kind==="publicHoliday"?t.jsxs("div",{className:x.events,children:[t.jsxs("span",{children:[f(n.countryCode),"Â "]}),t.jsxs("strong",{children:[n.country,"Â "]}),t.jsx("a",{target:"_blank",href:T(n.date,n.country,n.name,d),children:n.name})]},n.name+n.countryCode):t.jsxs("div",{className:x.events,children:[n.icon," ",n.name]},n.name))]},a.date.valueOf()))})})}const U="_controlGroup_1xxt9_1",q="_controlGroupLabel_1xxt9_6",J="_countryFilter_1xxt9_13",Q="_toggleFilter_1xxt9_19",X="_countryChip_1xxt9_20",Z="_active_1xxt9_31",Y="_checkboxContainer_1xxt9_41",tt="_checkbox_1xxt9_41",et="_checkboxLabel_1xxt9_63",r={controlGroup:U,controlGroupLabel:q,countryFilter:J,toggleFilter:Q,countryChip:X,active:Z,checkboxContainer:Y,checkbox:tt,checkboxLabel:et},nt=({selectedCountries:s,showAllCountries:o,onToggleCountry:l,setShowAllCountries:d,setShowAllHolidays:a})=>{const[n,m]=h.useState(!1),[c,i]=h.useState(!1);return h.useEffect(()=>{s.length===0&&d(!0)},[d,s]),h.useEffect(()=>{a(!c)},[c]),t.jsxs("div",{className:r.controlGroup,children:[t.jsx("label",{className:r.controlGroupLabel,children:"Select Countries"}),t.jsxs("div",{className:r.checkboxContainer,children:[t.jsx("input",{type:"checkbox",id:"showExtraHolidaysOnly",className:r.checkbox,checked:c,onChange:()=>i(!c)}),t.jsx("label",{htmlFor:"showExtraHolidaysOnly",className:r.checkboxLabel,children:"Show only extra holidays"}),t.jsx("input",{type:"checkbox",id:"showTimezones",className:r.checkbox,checked:n,onChange:()=>m(!n)}),t.jsx("label",{htmlFor:"showTimezones",className:r.checkboxLabel,children:o?"Show timezones":"Show local time"})]}),t.jsxs("div",{className:r.countryFilter,children:[Object.entries(F).filter(([e])=>o||s.includes(e)).map(([e,u])=>t.jsxs("div",{className:`${r.countryChip} ${s.includes(e)?r.active:""}`,onClick:()=>l(e),title:"Current time: "+k(e),children:[f(e)," ",u,n&&t.jsx("span",{className:r.offset,children:o?g[e]?` (UTC${g[e]})`:"":" - "+k(e)})]},e)),t.jsx("div",{className:`${r.toggleFilter}`,onClick:()=>d(!o),children:o?"Hide inactive":"Show all"})]})]})},st="_actionButton_796d6_1",ot="_actionButtonContainer_796d6_6",y={actionButton:st,actionButtonContainer:ot};function N(s){return Array.from(new Set((s??[]).flatMap(o=>o.events.filter(l=>l.kind==="publicHoliday").map(l=>l.country).filter(Boolean))))}const at=({selectedYearDays:s,viewMode:o,toggleMode:l})=>{const d=D(),a=()=>{const c=(s??[]).flatMap(i=>i.events.filter(e=>e.kind==="publicHoliday").map(e=>`${$(i.date)} ${f(e.countryCode)} ${e.country}: ${e.name}`)).filter(Boolean).join(`
`);localStorage.setItem(H,c),d(`/${B}/EditEvents`)},n=()=>{const c=N(s),i=s.map(e=>e.events).flat();E(i,c.join("_")+"_calendar")},m=()=>{const c=(s??[]).flatMap(e=>e.events.filter(u=>u.kind==="publicHoliday"));N(s).forEach(e=>{const u=c.filter(p=>p.country===e);u.length&&E(u,e+"_calendar")})};return t.jsxs("div",{className:y.actionButtonContainer,children:[t.jsx("button",{className:y.actionButton,onClick:l,children:o==="month"?"Switch to year mode":"Switch to month mode"}),t.jsx("button",{className:y.actionButton,onClick:m,children:"Download separate ICS files"}),t.jsx("button",{className:y.actionButton,onClick:n,children:"Download combined ICS file"}),t.jsx("button",{className:y.actionButton,onClick:a,style:{right:120},children:"Create custom calendar"})]})},it=()=>{h.useEffect(()=>{C(async()=>{const{allHolidays:_}=await import("./index-BLBwjQb6.js");return{allHolidays:_}},[]).then(({allHolidays:_})=>{o(A(Object.values(_)))})},[]);const[s,o]=h.useState([]),[l,d]=h.useState(!1),{currentDate:a,selectedCountries:n,selectedMonthDays:m,selectedYearDays:c,mode:i,navigateMonth:e,toggleCountry:u,handleDateChange:p,handleModeChange:b,showAllCountries:w,setShowAllCountries:S}=O(s,l),[j,L]=h.useState({});return h.useEffect(()=>{C(()=>import("./all-CpPQXMCT.js"),[]).then(_=>{L(_.descriptions)})},[]),t.jsxs("div",{className:v.app,children:[t.jsxs("div",{className:v.header,children:[t.jsx("h1",{children:t.jsx("a",{href:"./",children:"ðŸŒ Public Holidays Calendar"})}),t.jsx("p",{children:"Track public holidays across multiple countries"})]}),t.jsxs("div",{className:v.container,children:[t.jsx(z,{selectedDate:a,onDateChange:p,onNavigateMonth:e,extraControls:t.jsx(nt,{showAllCountries:w,setShowAllCountries:S,selectedCountries:n,onToggleCountry:u,setShowAllHolidays:d})}),t.jsx(at,{selectedYearDays:c,viewMode:i,toggleMode:()=>b(i==="month"?"year":"month",a.getMonth())}),t.jsx(G,{selectedYearDays:c,selectedMonthDays:m,currentDate:a,mode:i,onModeChange:b,countryData:j}),t.jsx(K,{selectedYearDays:c,currentDate:a,mode:i,countryData:j})]})]})};export{it as Holidays,it as default};
